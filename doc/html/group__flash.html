<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>wflash - WiFi bootloader for Genesis/Megadrive: flash</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">wflash - WiFi bootloader for Genesis/Megadrive
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">flash</div>  </div>
</div><!--header-->
<div class="contents">

<p>This module allows to manage (mainly read and write) from flash memory chips such as S29GL032.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structFlashCmd.html">FlashCmd</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data used to perform different flash commands.  <a href="structFlashCmd.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga6cab0332f3e66595eccb5654ba99b589"><td class="memItemLeft" align="right" valign="top"><a id="ga6cab0332f3e66595eccb5654ba99b589"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#ga6cab0332f3e66595eccb5654ba99b589">FLASH_CHIP_LENGTH</a>&#160;&#160;&#160;(4LU*1024LU*1024LU)</td></tr>
<tr class="memdesc:ga6cab0332f3e66595eccb5654ba99b589"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash chip length: 4 MiB. <br /></td></tr>
<tr class="separator:ga6cab0332f3e66595eccb5654ba99b589"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga04fc5c12e6899771e24dcf85e790d2df"><td class="memItemLeft" align="right" valign="top"><a id="ga04fc5c12e6899771e24dcf85e790d2df"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#ga04fc5c12e6899771e24dcf85e790d2df">FLASH_CHIP_WBUFLEN</a>&#160;&#160;&#160;16</td></tr>
<tr class="memdesc:ga04fc5c12e6899771e24dcf85e790d2df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write data buffer length in words. <br /></td></tr>
<tr class="separator:ga04fc5c12e6899771e24dcf85e790d2df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga92d793fc3704a30f6cc604fa5253f296"><td class="memItemLeft" align="right" valign="top"><a id="ga92d793fc3704a30f6cc604fa5253f296"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#ga92d793fc3704a30f6cc604fa5253f296">FLASH_RESET_CYC</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga92d793fc3704a30f6cc604fa5253f296"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of write cycles to reset Flash interface. <br /></td></tr>
<tr class="separator:ga92d793fc3704a30f6cc604fa5253f296"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4fb85d52331dd376e1ade4de7a39b11f"><td class="memItemLeft" align="right" valign="top"><a id="ga4fb85d52331dd376e1ade4de7a39b11f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#ga4fb85d52331dd376e1ade4de7a39b11f">FLASH_UNLOCK_CYC</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:ga4fb85d52331dd376e1ade4de7a39b11f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of cycles to unlock. <br /></td></tr>
<tr class="separator:ga4fb85d52331dd376e1ade4de7a39b11f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga14ac3e6c39f5fd5af98b5a1531d3a943"><td class="memItemLeft" align="right" valign="top"><a id="ga14ac3e6c39f5fd5af98b5a1531d3a943"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#ga14ac3e6c39f5fd5af98b5a1531d3a943">FLASH_AUTOSEL_CYC</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga14ac3e6c39f5fd5af98b5a1531d3a943"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of cycles of the autoselect command. <br /></td></tr>
<tr class="separator:ga14ac3e6c39f5fd5af98b5a1531d3a943"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf929ba64f4c56813d4468f211dd4f8d2"><td class="memItemLeft" align="right" valign="top"><a id="gaf929ba64f4c56813d4468f211dd4f8d2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#gaf929ba64f4c56813d4468f211dd4f8d2">FLASH_MANID_CYC</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:gaf929ba64f4c56813d4468f211dd4f8d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of cycles of the manufacturer ID request command. <br /></td></tr>
<tr class="separator:gaf929ba64f4c56813d4468f211dd4f8d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gade254648606438be90021443b0630651"><td class="memItemLeft" align="right" valign="top"><a id="gade254648606438be90021443b0630651"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#gade254648606438be90021443b0630651">FLASH_DEVID_CYC</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:gade254648606438be90021443b0630651"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of cycles of the device ID request command. <br /></td></tr>
<tr class="separator:gade254648606438be90021443b0630651"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8e93660995397aa74d975e6347496727"><td class="memItemLeft" align="right" valign="top"><a id="ga8e93660995397aa74d975e6347496727"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#ga8e93660995397aa74d975e6347496727">FLASH_PROG_CYC</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga8e93660995397aa74d975e6347496727"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of cycles of the program command. <br /></td></tr>
<tr class="separator:ga8e93660995397aa74d975e6347496727"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3362b39e490264efa01f3dc5c7f1d596"><td class="memItemLeft" align="right" valign="top"><a id="ga3362b39e490264efa01f3dc5c7f1d596"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#ga3362b39e490264efa01f3dc5c7f1d596">FLASH_WR_BUF_CYC</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga3362b39e490264efa01f3dc5c7f1d596"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of cycles of the write to buffer command. <br /></td></tr>
<tr class="separator:ga3362b39e490264efa01f3dc5c7f1d596"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga756292786af3fca60e26a3ce033706ab"><td class="memItemLeft" align="right" valign="top"><a id="ga756292786af3fca60e26a3ce033706ab"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#ga756292786af3fca60e26a3ce033706ab">FLASH_PRG_BUF_CYC</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga756292786af3fca60e26a3ce033706ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of cycles of the program buffer to flash command. <br /></td></tr>
<tr class="separator:ga756292786af3fca60e26a3ce033706ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7cd4250a8e87a3d47be3a08757700929"><td class="memItemLeft" align="right" valign="top"><a id="ga7cd4250a8e87a3d47be3a08757700929"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#ga7cd4250a8e87a3d47be3a08757700929">FLASH_UL_BYP_CYC</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga7cd4250a8e87a3d47be3a08757700929"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of cycles of the unlock bypass command. <br /></td></tr>
<tr class="separator:ga7cd4250a8e87a3d47be3a08757700929"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac9beba4adc194f3619b432e1df3574ef"><td class="memItemLeft" align="right" valign="top"><a id="gac9beba4adc194f3619b432e1df3574ef"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#gac9beba4adc194f3619b432e1df3574ef">FLASH_UL_BYP_PROG_CYC</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:gac9beba4adc194f3619b432e1df3574ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of cycles of the unlock bypass program command. <br /></td></tr>
<tr class="separator:gac9beba4adc194f3619b432e1df3574ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac60f6bac905d259d273171ccf89d7fd1"><td class="memItemLeft" align="right" valign="top"><a id="gac60f6bac905d259d273171ccf89d7fd1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#gac60f6bac905d259d273171ccf89d7fd1">FLASH_UL_BYP_RST_CYC</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:gac60f6bac905d259d273171ccf89d7fd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of cycles of the unlock bypass reset command. <br /></td></tr>
<tr class="separator:gac60f6bac905d259d273171ccf89d7fd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga59914b7a051d11f51e0dd78a4fbfbba6"><td class="memItemLeft" align="right" valign="top"><a id="ga59914b7a051d11f51e0dd78a4fbfbba6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#ga59914b7a051d11f51e0dd78a4fbfbba6">FLASH_CHIP_ERASE_CYC</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:ga59914b7a051d11f51e0dd78a4fbfbba6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of cycles of the chip erase command. <br /></td></tr>
<tr class="separator:ga59914b7a051d11f51e0dd78a4fbfbba6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga09b8e95eaea2ac7e91aca96a68f01a71"><td class="memItemLeft" align="right" valign="top"><a id="ga09b8e95eaea2ac7e91aca96a68f01a71"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#ga09b8e95eaea2ac7e91aca96a68f01a71">FLASH_SEC_ERASE_CYC</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:ga09b8e95eaea2ac7e91aca96a68f01a71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of cycles of the sector erase command. <br /></td></tr>
<tr class="separator:ga09b8e95eaea2ac7e91aca96a68f01a71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa52403b652f48d849f877406a276e1fe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#gaa52403b652f48d849f877406a276e1fe">FLASH_WRITE_CMD</a>(cmd,  iterator)</td></tr>
<tr class="separator:gaa52403b652f48d849f877406a276e1fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaae24153beabe70cd78831db27782a339"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#gaae24153beabe70cd78831db27782a339">FlashInit</a> (void)</td></tr>
<tr class="memdesc:gaae24153beabe70cd78831db27782a339"><td class="mdescLeft">&#160;</td><td class="mdescRight">Module initialization. Configures the 68k bus.  <a href="#gaae24153beabe70cd78831db27782a339">More...</a><br /></td></tr>
<tr class="separator:gaae24153beabe70cd78831db27782a339"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga221148419355c3218e1b75695973b46d"><td class="memItemLeft" align="right" valign="top"><a id="ga221148419355c3218e1b75695973b46d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#ga221148419355c3218e1b75695973b46d">FlashIdle</a> (void)</td></tr>
<tr class="memdesc:ga221148419355c3218e1b75695973b46d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set flash ports to default (idle) values. <br /></td></tr>
<tr class="separator:ga221148419355c3218e1b75695973b46d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga67424603ddf87f195060e907a3f79bc3"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#ga67424603ddf87f195060e907a3f79bc3">FlashGetManId</a> (void)</td></tr>
<tr class="memdesc:ga67424603ddf87f195060e907a3f79bc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the manufacturer ID query command to the flash chip.  <a href="#ga67424603ddf87f195060e907a3f79bc3">More...</a><br /></td></tr>
<tr class="separator:ga67424603ddf87f195060e907a3f79bc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5292ab3cd1bebda146c452ff58f61cf3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#ga5292ab3cd1bebda146c452ff58f61cf3">FlashGetDevId</a> (uint8_t devId[3])</td></tr>
<tr class="memdesc:ga5292ab3cd1bebda146c452ff58f61cf3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the device ID query command to the flash chip.  <a href="#ga5292ab3cd1bebda146c452ff58f61cf3">More...</a><br /></td></tr>
<tr class="separator:ga5292ab3cd1bebda146c452ff58f61cf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2db7e105ed4c082bc4b8f6e8f4df3f5d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#ga2db7e105ed4c082bc4b8f6e8f4df3f5d">FlashProg</a> (uint32_t addr, uint16_t data)</td></tr>
<tr class="memdesc:ga2db7e105ed4c082bc4b8f6e8f4df3f5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Programs a word to the specified address.  <a href="#ga2db7e105ed4c082bc4b8f6e8f4df3f5d">More...</a><br /></td></tr>
<tr class="separator:ga2db7e105ed4c082bc4b8f6e8f4df3f5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4459a3505fe2c9ba0abb1018ae498b45"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#ga4459a3505fe2c9ba0abb1018ae498b45">FlashWriteBuf</a> (uint32_t addr, uint16_t data[], uint8_t wLen)</td></tr>
<tr class="memdesc:ga4459a3505fe2c9ba0abb1018ae498b45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Programs a buffer to the specified address range.  <a href="#ga4459a3505fe2c9ba0abb1018ae498b45">More...</a><br /></td></tr>
<tr class="separator:ga4459a3505fe2c9ba0abb1018ae498b45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac1dc29f65b5d2ed0e96d8d402bdf946f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#gac1dc29f65b5d2ed0e96d8d402bdf946f">FlashUnlockBypass</a> (void)</td></tr>
<tr class="separator:gac1dc29f65b5d2ed0e96d8d402bdf946f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gace1bbc54b192e801fb6a10d5a5bd8e01"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#gace1bbc54b192e801fb6a10d5a5bd8e01">FlashUnlockBypassReset</a> (void)</td></tr>
<tr class="separator:gace1bbc54b192e801fb6a10d5a5bd8e01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadd47fef23c80316308dadb25aba4ff0f"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#gadd47fef23c80316308dadb25aba4ff0f">FlashChipErase</a> (void)</td></tr>
<tr class="separator:gadd47fef23c80316308dadb25aba4ff0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4e15703a2630b0d5dc1877424a242335"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#ga4e15703a2630b0d5dc1877424a242335">FlashSectErase</a> (uint32_t addr)</td></tr>
<tr class="separator:ga4e15703a2630b0d5dc1877424a242335"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafdfa360e3960ee22336b33f6a29d42ca"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#gafdfa360e3960ee22336b33f6a29d42ca">FlashRangeErase</a> (uint32_t addr, uint32_t len)</td></tr>
<tr class="separator:gafdfa360e3960ee22336b33f6a29d42ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga56eb56386ce968163ee2f2d0b67bb50e"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#ga56eb56386ce968163ee2f2d0b67bb50e">FlashDataPoll</a> (uint32_t addr, uint8_t data)</td></tr>
<tr class="memdesc:ga56eb56386ce968163ee2f2d0b67bb50e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Polls flash chip after a program operation, and returns when the program operation ends, or when there is an error.  <a href="#ga56eb56386ce968163ee2f2d0b67bb50e">More...</a><br /></td></tr>
<tr class="separator:ga56eb56386ce968163ee2f2d0b67bb50e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1c30bdf368bbf6b4b5e2fbddb8d59f7"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash.html#gad1c30bdf368bbf6b4b5e2fbddb8d59f7">FlashErasePoll</a> (uint32_t addr)</td></tr>
<tr class="memdesc:gad1c30bdf368bbf6b4b5e2fbddb8d59f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Polls flash chip after an erase operation, and returns when the program operation ends, or when there is an error.  <a href="#gad1c30bdf368bbf6b4b5e2fbddb8d59f7">More...</a><br /></td></tr>
<tr class="separator:gad1c30bdf368bbf6b4b5e2fbddb8d59f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This module allows to manage (mainly read and write) from flash memory chips such as S29GL032. </p>
<dl class="section author"><dt>Author</dt><dd>Jesús Alonso (doragasu) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2015 </dd></dl>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gaa52403b652f48d849f877406a276e1fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa52403b652f48d849f877406a276e1fe">&#9670;&nbsp;</a></span>FLASH_WRITE_CMD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLASH_WRITE_CMD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cmd, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">iterator&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                    \</div><div class="line">    for (iterator = 0; iterator &lt; cmd ## _CYC; iterator++) {    \</div><div class="line">        FlashWrite(cmd[iterator].addr, cmd[iterator].data);     \</div><div class="line">    }                                                           \</div><div class="line">} <span class="keywordflow">while</span> (0);</div></div><!-- fragment --><p>Helper macro for writing commands. Takes the command and an auxiliar variable used as an iterator. </p>

<p class="definition">Definition at line <a class="el" href="flash_8h_source.html#l00204">204</a> of file <a class="el" href="flash_8h_source.html">flash.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gadd47fef23c80316308dadb25aba4ff0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadd47fef23c80316308dadb25aba4ff0f">&#9670;&nbsp;</a></span>FlashChipErase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t FlashChipErase </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Erases the complete flash chip.</p>
<dl class="section return"><dt>Returns</dt><dd>'0' the if erase operation completed successfully, '1' otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="flash_8c_source.html#l00239">239</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

</div>
</div>
<a id="ga56eb56386ce968163ee2f2d0b67bb50e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga56eb56386ce968163ee2f2d0b67bb50e">&#9670;&nbsp;</a></span>FlashDataPoll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t FlashDataPoll </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Polls flash chip after a program operation, and returns when the program operation ends, or when there is an error. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>Address to which data has been written. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Data written to addr address. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if OK, 1 if error during program operation. </dd></dl>

<p class="definition">Definition at line <a class="el" href="flash_8c_source.html#l00055">55</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

</div>
</div>
<a id="gad1c30bdf368bbf6b4b5e2fbddb8d59f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad1c30bdf368bbf6b4b5e2fbddb8d59f7">&#9670;&nbsp;</a></span>FlashErasePoll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t FlashErasePoll </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Polls flash chip after an erase operation, and returns when the program operation ends, or when there is an error. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>Address contained in the erased zone. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if OK, 1 if error during program operation.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Function erases the minimum memory range CONTAINING the specified range. Due to the granularity of the flash sectors, it can (and most likely will) erase more memory than requested. This is expected behaviour, and programmer must be aware of this. </dd>
<dd>
Currently the function does not check if the input range covers the sector/s containing the bootloader.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>Address contained in the erased zone. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if OK, 0 if error during program operation. </dd></dl>

<p class="definition">Definition at line <a class="el" href="flash_8c_source.html#l00087">87</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

</div>
</div>
<a id="ga5292ab3cd1bebda146c452ff58f61cf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5292ab3cd1bebda146c452ff58f61cf3">&#9670;&nbsp;</a></span>FlashGetDevId()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FlashGetDevId </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>devId</em>[3]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes the device ID query command to the flash chip. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">devId</td><td>The device ID code, consisting of 3 words. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="flash_8c_source.html#l00135">135</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

</div>
</div>
<a id="ga67424603ddf87f195060e907a3f79bc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga67424603ddf87f195060e907a3f79bc3">&#9670;&nbsp;</a></span>FlashGetManId()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t FlashGetManId </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes the manufacturer ID query command to the flash chip. </p>
<dl class="section return"><dt>Returns</dt><dd>The manufacturer ID code. </dd></dl>

<p class="definition">Definition at line <a class="el" href="flash_8c_source.html#l00119">119</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

</div>
</div>
<a id="gaae24153beabe70cd78831db27782a339"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaae24153beabe70cd78831db27782a339">&#9670;&nbsp;</a></span>FlashInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FlashInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Module initialization. Configures the 68k bus. </p>
<p>Public functions </p>

<p class="definition">Definition at line <a class="el" href="flash_8c_source.html#l00111">111</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

</div>
</div>
<a id="ga2db7e105ed4c082bc4b8f6e8f4df3f5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2db7e105ed4c082bc4b8f6e8f4df3f5d">&#9670;&nbsp;</a></span>FlashProg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FlashProg </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Programs a word to the specified address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>The address to which data will be programmed. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Data to program to the specified address.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Doesn't poll until programming is complete </dd></dl>

<p class="definition">Definition at line <a class="el" href="flash_8c_source.html#l00152">152</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

</div>
</div>
<a id="gafdfa360e3960ee22336b33f6a29d42ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafdfa360e3960ee22336b33f6a29d42ca">&#9670;&nbsp;</a></span>FlashRangeErase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t FlashRangeErase </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Erases a flash memory range.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>Address base for the range to erase. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Length of the range to erase </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>'0' if the erase operation completed successfully, '1' otherwise.</dd></dl>
<p>Erases a flash memory range.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>Address base for the range to erase. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Length of the range to erase </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>'0' if the erase operation completed successfully, '1' otherwise.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Function erases the minimum memory range CONTAINING the specified range. Due to the granularity of the flash sectors, it can (and most likely will) erase more memory than requested. This is expected behaviour, and programmer must be aware of this. </dd>
<dd>
Currently the function does not check if the input range covers the sector/s containing the bootloader. </dd></dl>

<p class="definition">Definition at line <a class="el" href="flash_8c_source.html#l00289">289</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

</div>
</div>
<a id="ga4e15703a2630b0d5dc1877424a242335"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4e15703a2630b0d5dc1877424a242335">&#9670;&nbsp;</a></span>FlashSectErase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t FlashSectErase </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Erases a complete flash sector, specified by addr parameter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>Address contained in the sector that will be erased. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>'0' if the erase operation completed successfully, '1' otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="flash_8c_source.html#l00255">255</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

</div>
</div>
<a id="gac1dc29f65b5d2ed0e96d8d402bdf946f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac1dc29f65b5d2ed0e96d8d402bdf946f">&#9670;&nbsp;</a></span>FlashUnlockBypass()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FlashUnlockBypass </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enables the "Unlock Bypass" status, allowing to issue several commands (like the Unlock Bypass Programm) using less write cycles. </p>

<p class="definition">Definition at line <a class="el" href="flash_8c_source.html#l00218">218</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

</div>
</div>
<a id="gace1bbc54b192e801fb6a10d5a5bd8e01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gace1bbc54b192e801fb6a10d5a5bd8e01">&#9670;&nbsp;</a></span>FlashUnlockBypassReset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FlashUnlockBypassReset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ends the "Unlock Bypass" state, returning to default read mode. </p>

<p class="definition">Definition at line <a class="el" href="flash_8c_source.html#l00228">228</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

</div>
</div>
<a id="ga4459a3505fe2c9ba0abb1018ae498b45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4459a3505fe2c9ba0abb1018ae498b45">&#9670;&nbsp;</a></span>FlashWriteBuf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t FlashWriteBuf </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>data</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>wLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Programs a buffer to the specified address range. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>The address of the first word to be written </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>The data array to program to the specified address range. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wLen</td><td>The number of words to program, contained on data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of words successfully programed.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>wLen must be less or equal than 16. </dd>
<dd>
If addr-wLen defined range crosses a write-buffer boundary, all the requested words will not be written. To avoid this situation, it is advisable to write to addresses having the lower 4 bits (A1~A5) equal to 0. </dd></dl>

<p class="definition">Definition at line <a class="el" href="flash_8c_source.html#l00176">176</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
